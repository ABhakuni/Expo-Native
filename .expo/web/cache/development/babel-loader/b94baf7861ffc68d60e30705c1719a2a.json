{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNativeExperimentalNavigation = _interopRequireDefault(require(\"react-native-experimental-navigation\"));\n\nvar _Actions = _interopRequireWildcard(require(\"./Actions\"));\n\nvar _State = _interopRequireDefault(require(\"./State\"));\n\nvar _Reducer = _interopRequireWildcard(require(\"./Reducer\"));\n\nvar _DefaultRenderer = _interopRequireDefault(require(\"./DefaultRenderer\"));\n\nvar _Scene = _interopRequireDefault(require(\"./Scene\"));\n\nvar ActionConst = _interopRequireWildcard(require(\"./ActionConst\"));\n\nvar _jsxFileName = \"/Users/apple/Documents/janitri/sampleapp/node_modules/react-native-router-flux/src/Router.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar NavigationRootContainer = _reactNativeExperimentalNavigation.default.RootContainer;\nvar propTypes = {\n  dispatch: _propTypes.default.func,\n  backAndroidHandler: _propTypes.default.func,\n  onBackAndroid: _propTypes.default.func,\n  onExitApp: _propTypes.default.func\n};\n\nvar Router = function (_Component) {\n  (0, _inherits2.default)(Router, _Component);\n\n  var _super = _createSuper(Router);\n\n  function Router(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Router);\n    _this = _super.call(this, props);\n    _this.renderNavigation = _this.renderNavigation.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleProps = _this.handleProps.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleBackAndroid = _this.handleBackAndroid.bind((0, _assertThisInitialized2.default)(_this));\n\n    var reducer = _this.handleProps(props);\n\n    _this.state = {\n      reducer: reducer\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(Router, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return {\n        routes: _Actions.default\n      };\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _reactNative.BackHandler.addEventListener('hardwareBackPress', this.handleBackAndroid);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      var reducer = this.handleProps(props);\n      this.setState({\n        reducer: reducer\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      _reactNative.BackHandler.removeEventListener('hardwareBackPress', this.handleBackAndroid);\n    }\n  }, {\n    key: \"handleBackAndroid\",\n    value: function handleBackAndroid() {\n      var _this$props = this.props,\n          backAndroidHandler = _this$props.backAndroidHandler,\n          onBackAndroid = _this$props.onBackAndroid,\n          onExitApp = _this$props.onExitApp;\n\n      if (backAndroidHandler) {\n        return backAndroidHandler();\n      }\n\n      try {\n        _Actions.default.androidBack();\n\n        if (onBackAndroid) {\n          onBackAndroid();\n        }\n\n        return true;\n      } catch (err) {\n        if (onExitApp) {\n          return onExitApp();\n        }\n\n        return false;\n      }\n    }\n  }, {\n    key: \"handleProps\",\n    value: function handleProps(props) {\n      var scenesMap;\n\n      if (props.scenes) {\n        scenesMap = props.scenes;\n      } else {\n        var _scenes = props.children;\n\n        if (Array.isArray(props.children) || props.children.props.component) {\n          _scenes = _react.default.createElement(_Scene.default, (0, _extends2.default)({\n            key: \"__root\",\n            hideNav: true\n          }, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 11\n            }\n          }), props.children);\n        }\n\n        scenesMap = _Actions.default.create(_scenes, props.wrapBy);\n      }\n\n      var children = props.children,\n          styles = props.styles,\n          scenes = props.scenes,\n          reducer = props.reducer,\n          createReducer = props.createReducer,\n          parentProps = (0, _objectWithoutProperties2.default)(props, [\"children\", \"styles\", \"scenes\", \"reducer\", \"createReducer\"]);\n      scenesMap.rootProps = parentProps;\n      var initialState = (0, _State.default)(scenesMap);\n      var reducerCreator = props.createReducer || _Reducer.default;\n      var routerReducer = props.reducer || reducerCreator({\n        initialState: initialState,\n        scenes: scenesMap\n      });\n      return routerReducer;\n    }\n  }, {\n    key: \"renderNavigation\",\n    value: function renderNavigation(navigationState, onNavigate) {\n      var _this2 = this;\n\n      if (!navigationState) {\n        return null;\n      }\n\n      _Actions.default.get = function (key) {\n        return (0, _Reducer.findElement)(navigationState, key, ActionConst.REFRESH);\n      };\n\n      _Actions.default.callback = function (props) {\n        var constAction = props.type && _Actions.ActionMap[props.type] ? _Actions.ActionMap[props.type] : null;\n\n        if (_this2.props.dispatch) {\n          if (constAction) {\n            _this2.props.dispatch(_objectSpread({}, props, {\n              type: constAction\n            }));\n          } else {\n            _this2.props.dispatch(props);\n          }\n        }\n\n        return constAction ? onNavigate(_objectSpread({}, props, {\n          type: constAction\n        })) : onNavigate(props);\n      };\n\n      return _react.default.createElement(_DefaultRenderer.default, {\n        onNavigate: onNavigate,\n        navigationState: navigationState,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 12\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.reducer) return null;\n      return _react.default.createElement(NavigationRootContainer, {\n        reducer: this.state.reducer,\n        renderNavigation: this.renderNavigation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n  return Router;\n}(_react.Component);\n\nRouter.childContextTypes = {\n  routes: _propTypes.default.object\n};\nRouter.propTypes = propTypes;\nvar _default = Router;\nexports.default = _default;","map":{"version":3,"sources":["/Users/apple/Documents/janitri/sampleapp/node_modules/react-native-router-flux/src/Router.js"],"names":["NavigationRootContainer","NavigationExperimental","RootContainer","propTypes","dispatch","PropTypes","func","backAndroidHandler","onBackAndroid","onExitApp","Router","props","renderNavigation","bind","handleProps","handleBackAndroid","reducer","state","routes","Actions","BackHandler","addEventListener","setState","removeEventListener","androidBack","err","scenesMap","scenes","children","Array","isArray","component","create","wrapBy","styles","createReducer","parentProps","rootProps","initialState","reducerCreator","Reducer","routerReducer","navigationState","onNavigate","get","key","ActionConst","REFRESH","callback","constAction","type","ActionMap","Component","childContextTypes","object"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Pavel Aksonov\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { BackHandler } from 'react-native';\nimport NavigationExperimental from 'react-native-experimental-navigation';\n\nimport Actions, { ActionMap } from './Actions';\nimport getInitialStateFromRoot from './State';\nimport Reducer, { findElement } from './Reducer';\nimport DefaultRenderer from './DefaultRenderer';\nimport Scene from './Scene';\nimport * as ActionConst from './ActionConst';\n\nconst {\n  RootContainer: NavigationRootContainer,\n} = NavigationExperimental;\n\nconst propTypes = {\n  dispatch: PropTypes.func,\n  backAndroidHandler: PropTypes.func,\n  onBackAndroid: PropTypes.func,\n  onExitApp: PropTypes.func,\n};\n\nclass Router extends Component {\n  static childContextTypes = {\n    routes: PropTypes.object,\n  }\n\n  constructor(props) {\n    super(props);\n    this.renderNavigation = this.renderNavigation.bind(this);\n    this.handleProps = this.handleProps.bind(this);\n    this.handleBackAndroid = this.handleBackAndroid.bind(this);\n    const reducer = this.handleProps(props);\n    this.state = { reducer };\n  }\n\n  getChildContext() {\n    return {\n      routes: Actions,\n    };\n  }\n\n  componentDidMount() {\n    BackHandler.addEventListener('hardwareBackPress', this.handleBackAndroid);\n  }\n\n  componentWillReceiveProps(props) {\n    const reducer = this.handleProps(props);\n    this.setState({ reducer });\n  }\n\n  componentWillUnmount() {\n    BackHandler.removeEventListener('hardwareBackPress', this.handleBackAndroid);\n  }\n\n  handleBackAndroid() {\n    const {\n      backAndroidHandler,\n      onBackAndroid,\n      onExitApp,\n    } = this.props;\n    // optional for customizing handler\n    if (backAndroidHandler) {\n      return backAndroidHandler();\n    }\n\n    try {\n      Actions.androidBack();\n      if (onBackAndroid) {\n        onBackAndroid();\n      }\n      return true;\n    } catch (err) {\n      if (onExitApp) {\n        return onExitApp();\n      }\n\n      return false;\n    }\n  }\n\n  handleProps(props) {\n    let scenesMap;\n\n    if (props.scenes) {\n      scenesMap = props.scenes;\n    } else {\n      let scenes = props.children;\n\n      if (Array.isArray(props.children) || props.children.props.component) {\n        scenes = (\n          <Scene\n            key=\"__root\"\n            hideNav\n            {...this.props}\n          >\n            {props.children}\n          </Scene>\n        );\n      }\n      scenesMap = Actions.create(scenes, props.wrapBy);\n    }\n\n    // eslint-disable-next-line no-unused-vars\n    const { children, styles, scenes, reducer, createReducer, ...parentProps } = props;\n\n    scenesMap.rootProps = parentProps;\n\n    const initialState = getInitialStateFromRoot(scenesMap);\n    const reducerCreator = props.createReducer || Reducer;\n\n    const routerReducer = props.reducer || (\n      reducerCreator({\n        initialState,\n        scenes: scenesMap,\n      }));\n\n    return routerReducer;\n  }\n\n  renderNavigation(navigationState, onNavigate) {\n    if (!navigationState) {\n      return null;\n    }\n    Actions.get = key => findElement(navigationState, key, ActionConst.REFRESH);\n    Actions.callback = (props) => {\n      const constAction = (props.type && ActionMap[props.type] ? ActionMap[props.type] : null);\n      if (this.props.dispatch) {\n        if (constAction) {\n          this.props.dispatch({ ...props, type: constAction });\n        } else {\n          this.props.dispatch(props);\n        }\n      }\n      return (constAction ? onNavigate({ ...props, type: constAction }) : onNavigate(props));\n    };\n\n    return <DefaultRenderer onNavigate={onNavigate} navigationState={navigationState} />;\n  }\n\n  render() {\n    if (!this.state.reducer) return null;\n\n    return (\n      <NavigationRootContainer\n        reducer={this.state.reducer}\n        renderNavigation={this.renderNavigation}\n      />\n    );\n  }\n}\n\nRouter.propTypes = propTypes;\n\nexport default Router;\n"]},"metadata":{},"sourceType":"script"}